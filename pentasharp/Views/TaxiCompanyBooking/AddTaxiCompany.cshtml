@using pentasharp.ViewModel.TaxiModels
@model AddTaxiCompanyViewModel

@{
    ViewData["Title"] = "Manage Taxi Companies and Taxis";
}

<div class="container my-5">
    <div class="row justify-content-center">
        <!-- Add Taxi Company Form -->
        <div class="col-md-5 mb-4">
            <div class="card shadow-lg p-4 rounded-4">
                <h3 class="fw-bold text-secondary mb-3">Add Taxi Company</h3>
                <form asp-action="AddTaxiCompany" asp-controller="TaxiCompanyBooking" method="post">
                    <!-- Company Name -->
                    <div class="mb-3">
                        <label for="companyName" class="form-label">Company Name</label>
                        <input type="text" id="companyName" name="CompanyName" class="form-control" required placeholder="Enter Company Name" />
                    </div>

                    <!-- Contact Info -->
                    <div class="mb-3">
                        <label for="contactInfo" class="form-label">Contact Info</label>
                        <input type="text" id="contactInfo" name="ContactInfo" class="form-control" required placeholder="Enter Contact Info" />
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-4">Save Company</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- List of Taxi Companies -->
        <div class="col-md-5 mb-4">
            <div class="card shadow-lg p-4 rounded-4">
                <h3 class="fw-bold text-secondary mb-3">Existing Taxi Companies</h3>
                @if (Model.TaxiCompanies != null && Model.TaxiCompanies.Any())
                {
                    <ul class="list-group">
                        @foreach (var company in Model.TaxiCompanies)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@company.CompanyName</strong> - @company.ContactInfo
                                </div>
                                <div>
                                    <a href="@Url.Action("EditTaxiCompany", "TaxiCompanyBooking", new { id = company.TaxiCompanyId })" class="btn btn-warning btn-sm me-2">
                                        <i class="fas fa-edit"></i> Edit
                                    </a>
                                    <a href="@Url.Action("DeleteTaxiCompany", "TaxiCompanyBooking", new { id = company.TaxiCompanyId })" class="btn btn-danger btn-sm">
                                        <i class="fas fa-trash-alt"></i> Delete
                                    </a>
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>No taxi companies available.</p>
                }
            </div>
        </div>
    </div>

    <!-- Add Taxi Form and List of Taxis -->
    <div class="row justify-content-center">
        <div class="col-md-5 mb-4">
            <div class="card shadow-lg p-4 rounded-4">
                <h3 class="fw-bold text-secondary mb-3">Add Taxi</h3>
                <form asp-action="AddTaxi" asp-controller="TaxiCompanyBooking" method="post">
                    <!-- Select Company -->
                    <div class="mb-3">
                        <label for="taxiCompanyId" class="form-label">Taxi Company</label>
                        <select id="taxiCompanyId" name="TaxiCompanyId" class="form-control" required>
                            <option value="">Select Company</option>
                            @foreach (var company in Model.TaxiCompanies)
                            {
                                <option value="@company.TaxiCompanyId">@company.CompanyName</option>
                            }
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="licensePlate" class="form-label">License Plate</label>
                        <input type="text" id="licensePlate" name="LicensePlate" class="form-control" required placeholder="Enter License Plate" />
                    </div>

                    <div class="mb-3">
                        <label for="driverName" class="form-label">Driver Name</label>
                        <input type="text" id="driverName" name="DriverName" class="form-control" required placeholder="Enter Driver Name" />
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary btn-lg px-4">Save Taxi</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- List of Existing Taxis -->
        <div class="col-md-5 mb-4">
            <div class="card shadow-lg p-4 rounded-4">
                <h3 class="fw-bold text-secondary mb-3">Existing Taxis</h3>
                @if (Model.Taxis != null && Model.Taxis.Any())
                {
                    <ul class="list-group">
                        @foreach (var taxi in Model.Taxis)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>@taxi.TaxiCompany.CompanyName</strong> - @taxi.LicensePlate - @taxi.DriverName
                                </div>
                                <div>
                                    <a href="@Url.Action("EditTaxi", "TaxiCompanyBooking", new { id = taxi.TaxiId })" class="btn btn-warning btn-sm me-2">
                                        <i class="fas fa-edit"></i> Edit
                                    </a>
                                    <a href="@Url.Action("DeleteTaxi", "TaxiCompanyBooking", new { id = taxi.TaxiId })" class="btn btn-danger btn-sm">
                                        <i class="fas fa-trash-alt"></i> Delete
                                    </a>
                                </div>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p>No taxis available.</p>
                }
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    }

    h3 {
        color: #343a40;
    }

    .btn-primary {
        background-color: #007bff;
        border: none;
    }

        .btn-primary:hover {
            background-color: #0056b3;
        }

    .btn-warning {
        background-color: #f0ad4e;
        border: none;
    }

        .btn-warning:hover {
            background-color: #ec971f;
        }

    .btn-danger {
        background-color: #d9534f;
        border: none;
    }

        .btn-danger:hover {
            background-color: #c9302c;
        }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
