@{
    ViewData["Title"] = "Manage Reservations";
}

<div class="container my-5">
    <h1 class="text-center fw-bold text-primary mb-4">Manage Reservations</h1>

    <div class="d-flex justify-content-end mb-4">
        <a href="/Reservation/AddReservation" class="btn btn-primary btn-lg"><i class="fas fa-plus-circle"></i> Add New Reservation</a>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
        <div class="col">
            <div class="card shadow-sm schedule-card">
                <div class="card-body text-center">
                    <div class="icon-container mb-3">
                        <i class="fas fa-map-marker-alt fa-3x text-primary"></i>
                    </div>
                    <h5 class="card-title fw-bold">Route: Prishtina to Durres</h5>
                    <p class="text-muted mb-1">Reservation ID: PR123</p>
                    <p class="mb-1"><strong>Date:</strong> 2024-11-15</p>
                    <p><strong>Time:</strong> 08:00 AM</p>
                    <span class="badge bg-warning">Pending</span> 
                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="openEditReservationModal('PR123')">Edit</button>
                        <button class="btn btn-outline-danger btn-sm" onclick="deleteReservation('PR123')">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card shadow-sm schedule-card">
                <div class="card-body text-center">
                    <div class="icon-container mb-3">
                        <i class="fas fa-map-marker-alt fa-3x text-primary"></i>
                    </div>
                    <h5 class="card-title fw-bold">Route: Peje to Valbona</h5>
                    <p class="text-muted mb-1">Reservation ID: PV456</p>
                    <p class="mb-1"><strong>Date:</strong> 2024-11-16</p>
                    <p><strong>Time:</strong> 09:30 AM</p>
                    <span class="badge bg-success">Confirmed</span>
                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="openEditReservationModal('PV456')">Edit</button>
                        <button class="btn btn-outline-danger btn-sm" onclick="deleteReservation('PV456')">Delete</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col">
            <div class="card shadow-sm schedule-card">
                <div class="card-body text-center">
                    <div class="icon-container mb-3">
                        <i class="fas fa-map-marker-alt fa-3x text-primary"></i>
                    </div>
                    <h5 class="card-title fw-bold">Route: Prishtina to Shkoder</h5>
                    <p class="text-muted mb-1">Reservation ID: PS789</p>
                    <p class="mb-1"><strong>Date:</strong> 2024-11-17</p>
                    <p><strong>Time:</strong> 11:00 AM</p>
                    <span class="badge bg-danger">Cancelled</span> 
                    <div class="d-flex justify-content-center gap-2 mt-3">
                        <button class="btn btn-outline-primary btn-sm" onclick="openEditReservationModal('PS789')">Edit</button>
                        <button class="btn btn-outline-danger btn-sm" onclick="deleteReservation('PS789')">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editReservationModal" tabindex="-1" aria-labelledby="editReservationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fw-bold" id="editReservationModalLabel">Edit Reservation</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Route</label>
                    <input type="text" id="editRoute" class="form-control" readonly>
                </div>
                <div class="mb-3">
                    <label class="form-label">Reservation ID</label>
                    <input type="text" id="editReservationID" class="form-control" readonly>
                </div>
                <div class="mb-3">
                    <label class="form-label">Date</label>
                    <input type="date" id="editDate" class="form-control">
                </div>
                <div class="mb-3">
                    <label class="form-label">Time</label>
                    <input type="time" id="editTime" class="form-control">
                </div>
                <div class="mb-3">
                    <label class="form-label">Status</label>
                    <select id="editStatus" class="form-select">
                        <option value="Pending">Pending</option>
                        <option value="Confirmed">Confirmed</option>
                        <option value="Cancelled">Cancelled</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary btn-sm" onclick="saveReservationChanges()">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    function openEditReservationModal(reservationID) {
        document.getElementById('editReservationID').value = reservationID;

        if (reservationID === 'PR123') {
            document.getElementById('editRoute').value = 'Prishtina to Durres';
            document.getElementById('editDate').value = '2024-11-15';
            document.getElementById('editTime').value = '08:00';
            document.getElementById('editStatus').value = 'Pending';
        } else if (reservationID === 'PV456') {
            document.getElementById('editRoute').value = 'Peje to Valbona';
            document.getElementById('editDate').value = '2024-11-16';
            document.getElementById('editTime').value = '09:30';
            document.getElementById('editStatus').value = 'Confirmed';
        } else if (reservationID === 'PS789') {
            document.getElementById('editRoute').value = 'Prishtina to Shkoder';
            document.getElementById('editDate').value = '2024-11-17';
            document.getElementById('editTime').value = '11:00';
            document.getElementById('editStatus').value = 'Cancelled';
        }

        new bootstrap.Modal(document.getElementById('editReservationModal')).show();
    }

    function saveReservationChanges() {
        alert("Reservation changes have been saved!");
    }

    function deleteReservation(reservationID) {
        if (confirm(`Are you sure you want to delete the reservation with ID ${reservationID}?`)) {
            alert(`Reservation with ID ${reservationID} has been deleted.`);
        }
    }
</script>

<style>
    .schedule-card {
        border-radius: 8px;
        padding: 1.5rem;
        transition: transform 0.2s ease-in-out;
    }

        .schedule-card:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }

    .icon-container {
        color: #007bff;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: rgba(0, 123, 255, 0.1);
        margin: 0 auto;
    }

    .card-title {
        font-size: 1.25rem;
    }

    .badge {
        font-size: 0.8rem;
        padding: 5px 10px;
        border-radius: 20px;
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
