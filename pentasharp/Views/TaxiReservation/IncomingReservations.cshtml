@{
    ViewData["Title"] = "Incoming Taxi Reservations";
}

<div class="container my-5">
    <h1 class="text-center mb-4 fw-bold text-primary">Incoming Taxi Reservations</h1>

    <div class="list-group">
        <div class="list-group-item d-flex align-items-center justify-content-between shadow-sm p-3 mb-2 rounded">
            <div>
                <h6 class="mb-1 fw-bold">Jane Smith</h6>
                <small class="text-muted">Pickup: Central Park</small><br>
                <small class="text-muted">Dropoff: Times Square</small><br>
                <small class="text-muted">Reservation Date: 2024-11-20</small><br>
                <small class="text-muted">Pickup Time: 10:00 AM</small>
            </div>
            <button class="btn btn-outline-success btn-sm" onclick="openConfirmModal('Jane Smith', 'Central Park', 'Times Square', '2024-11-20', '10:00 AM')">
                Confirm
            </button>
        </div>

        <div class="list-group-item d-flex align-items-center justify-content-between shadow-sm p-3 mb-2 rounded">
            <div>
                <h6 class="mb-1 fw-bold">Michael Johnson</h6>
                <small class="text-muted">Pickup: Wall Street</small><br>
                <small class="text-muted">Dropoff: Empire State Building</small><br>
                <small class="text-muted">Reservation Date: 2024-11-21</small><br>
                <small class="text-muted">Pickup Time: 11:30 AM</small>
            </div>
            <button class="btn btn-outline-success btn-sm" onclick="openConfirmModal('Michael Johnson', 'Wall Street', 'Empire State Building', '2024-11-21', '11:30 AM')">
                Confirm
            </button>
        </div>
    </div>
</div>

<!-- Confirm Booking Modal -->
<div class="modal fade" id="confirmBookingModal" tabindex="-1" aria-labelledby="confirmBookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title fw-bold" id="confirmBookingModalLabel">Assign Driver</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Passenger:</strong> <span id="modalPassengerName"></span></p>
                <p><strong>Pickup:</strong> <span id="modalPickupLocation"></span></p>
                <p><strong>Dropoff:</strong> <span id="modalDropoffLocation"></span></p>
                <p><strong>Reservation Date:</strong> <span id="modalReservationDate"></span></p>
                <p><strong>Pickup Time:</strong> <span id="modalPickupTime"></span></p>
                <div class="mb-3">
                    <label for="driverSelect" class="form-label">Select Driver</label>
                    <select id="driverSelect" class="form-select" required>
                        <option value="">Choose a Driver</option>
                        <option value="Alex Smith">Alex Smith - License Plate: XYZ-1234</option>
                        <option value="David Miller">David Miller - License Plate: ABC-5678</option>
                        <option value="Sarah Lee">Sarah Lee - License Plate: LMN-9101</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary btn-sm" onclick="confirmBooking()">Confirm Booking</button>
            </div>
        </div>
    </div>
</div>

<script>
    function openConfirmModal(passengerName, pickupLocation, dropoffLocation, reservationDate, pickupTime) {
        document.getElementById('modalPassengerName').textContent = passengerName;
        document.getElementById('modalPickupLocation').textContent = pickupLocation;
        document.getElementById('modalDropoffLocation').textContent = dropoffLocation;
        document.getElementById('modalReservationDate').textContent = reservationDate;
        document.getElementById('modalPickupTime').textContent = pickupTime;
        new bootstrap.Modal(document.getElementById('confirmBookingModal')).show();
    }

    function confirmBooking() {
        const selectedDriver = document.getElementById('driverSelect').value;
        if (selectedDriver) {
            alert(`Booking confirmed and assigned to driver ${selectedDriver}`);
            document.getElementById('confirmBookingModal').querySelector('.btn-close').click();
        } else {
            alert('Please select a driver to confirm the booking.');
        }
    }
</script>

<style>
    .list-group-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .btn-outline-success {
        color: #28a745;
        border-color: #28a745;
    }

        .btn-outline-success:hover {
            background-color: #28a745;
            color: #fff;
        }

    .modal-sm {
        max-width: 500px;
    }
</style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
